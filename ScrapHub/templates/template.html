{% load static %}
<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <link rel="icon" type="image/png" href="{% static 'img/logo' %}{{ app }}.png">
    <title>{% block title %}{% endblock %}{{ app }} | {{ site }}</title>
    <link rel="stylesheet" type="text/css" href="{% static 'css/scraphub.css' %}"/>
    <link rel="stylesheet" type="text/css" href="{% static 'css/style' %}{{ app }}.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script>
      function search() {
        const search = document.querySelector('input').value;
        const site = window.location.search.split('=')[1].split('&')[0];
        window.location.href = `/ScrapSearch{{ app }}?Site=${site}&search=${search}&page=1`;
      }
      function imgLoad() {
        var x = 0;
        var i = 0;
        const images = document.querySelectorAll('main img');
        while (x =! 2 || i < images.length) {
          var image = images[i];
          const screenHeight = window.innerHeight;
          const imgPositionY = image.getBoundingClientRect().top;
          if (screenHeight+image.height*2+image.height*2 >= imgPositionY &&
              image.src == '' && image.clientWidth > 0 && image.clientHeight > 0) {
            image.src = image.getAttribute('data-src');
            x = 1;
          } else if (x == 1) { x = 2; }
          i++;
        }
      }
      function imgError(img) { img.src = "{% static 'img/logo' %}{{ app }}.png"; img.style="object-fit: contain"}
    </script>
    {% block head %}{% endblock %}
  </head>
  <body onscroll="imgLoad();">
    <header>
      <nav>
        <a href="/ScrapMain{{ app }}/?Site={{ site }}" title="{{ site }} Mainpage">
          <img class="logo" src="{% static 'img/logo' %}{{ app }}.png" type="image/png">
        </a>
        <div class="search">
          <input type="search" placeholder="Search" title="{{ site }} Search" onsearch="search()" value="" required>
          <button onclick="search()"><i class="fa fa-search"></i></button>
        </div>
        <a href="/{{ app }}" title="Website selection"><img class="logo" src="{% static 'img/icon' %}{{ app }}.png" onmouseover="src=src.replace('icon', 'iconOver')" onmouseout="src=src.replace('Over', '')" type="image/png"></a>
      </nav>
    </header>
    <main>
      {% block main %}
      {% endblock %}
    </main>
    <script type="text/javascript">imgLoad();</script>
  </body>
</html>