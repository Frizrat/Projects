{% extends 'template.html' %}

{% block title %}ScrapSearch{% endblock %}
{% block main %}
      <div class="container">
        <a href="{{ url }}" target="_blank"><h1>RÃ©sultat pour "{{ search }}" :</h1></a>
        {% if container %}
          <ul>
            {% for el in container %}
            <li class="{{ el.img.class }}">
              <a href="/ScrapInfo{{ app }}/?Site={{ site }}&url={{ el.link }}">
                <img class="{{ el.img.class }}" data-src="{{ el.img.link }}" onerror="imgError(this)">
                <div class="container-infos">
                  <div class="center" {% if not el.center %} style="background:none; height: 16px;" {% endif %}><h3>{{ el.center }}</h3></div>
                  <div class="left-right">
                    <span class="left">{{ el.left }}</span>
                    <span class="right">{{ el.right }}</span>
                  </div>
                </div>
                <h2>{{ el.title }}</h2>
              </a>
            </li>
            {% endfor %}
          </ul>
        {% else %}
          <h2> No result </h2>
        {% endif %}
      </div>
      <ul class="change-page"></ul>
      <script>
        const page = parseInt(window.location.search.split('page=')[1].split('&')[0]);
        var i = 0;
        for (var x = page-2; x < page+3; x++) {
          if (x+i < 1) { i = 0-x+1 }
          var newA = document.createElement('a');
          newA.className = 'page-link';
          if (x+i == page) { newA.className += ' active'}
          newA.innerHTML = 'Page '+(x+i);
          newA.href = window.location.href.replace(`page=${page}`, `page=${x+i}`);
          document.querySelector('.change-page').appendChild(newA);
        }
      </script>
{% endblock %}